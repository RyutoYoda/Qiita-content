---
title: GoogleCloudで秘密鍵を作成してみよう
tags:
  - 秘密鍵
  - GoogleCloud
  - GCPサービスアカウント
private: false
updated_at: '2024-03-30T13:18:22+09:00'
id: e42a575d3d46e160a4d7
organization_url_name: null
slide: false
ignorePublish: false
---

## はじめに

Google Cloud Platform (GCP) では、さまざまなサービスやAPIへのアクセスに秘密鍵が必要となります。この記事では、GCPで秘密鍵を作成する手順を詳しく説明します。このプロセスは、例えばdbt (data build tool) などの外部アプリケーションがGCPのリソースにアクセスする際にも重要になります。

## **ステップ1: GCPコンソールにログイン**

まず、[Google Cloud Console](https://console.cloud.google.com/)にアクセスし、Googleアカウントでログインします。既にプロジェクトを持っている場合は、そのプロジェクトを選択します。そうでない場合は、新しいプロジェクトを作成する必要があります。

## **ステップ2: APIとサービスへ移動**

プロジェクトダッシュボードから、「APIとサービス」ダッシュボードに移動します。

![スクリーンショット 2024-03-21 14.36.49.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3364428/df49253b-03aa-608d-1a47-ebb23e287686.png)


## **ステップ3: 認証情報を管理**

APIとサービスのダッシュボードの左側にあるメニューから「認証情報」を選択します。次に、「認証情報を作成」ボタンをクリックし、「サービスアカウント」を選択します。

![スクリーンショット 2024-03-21 14.37.06.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3364428/e567fc93-18e1-d37a-047c-ab9605361d74.png)


## **ステップ4: サービスアカウントの作成**

新しいサービスアカウントの詳細を入力します。サービスアカウント名と説明を適切に設定し、「作成して続行」をクリックします。

![スクリーンショット 2024-03-21 14.37.40.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3364428/e4d05dff-d712-ce87-f714-0cee51a78382.png)


### **ステップ5: サービスアカウントへのロールの割り当て**

サービスアカウントに必要なロールを割り当てます。これは、アカウントが持つべきアクセスレベルを決定します。例えば、BigQueryへのフルアクセスを許可する場合は、「BigQuery管理者」ロールを選択します。ここでは分かりやすく管理者にしていますが、操作できる範囲を決める重要な部分なので細かい権限を付与するようにしましょう。

![スクリーンショット 2024-03-21 14.37.57.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3364428/2cb49daa-ac54-087b-d005-3c62a874e5f0.png)

## **ステップ6: 秘密鍵の作成とダウンロード**

ロールの割り当てが完了したら、サービスアカウントの詳細ページに戻り、「キー」タブを選択します。

![スクリーンショット 2024-03-21 14.38.24.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3364428/69642e19-0530-f451-e212-735ee0e7553e.png)


ここで、「キーを追加」をクリックし、「新しいキーを作成」を選択します。キーフォーマットは「JSON」を選択し、「作成」をクリックすると、秘密鍵が自動的にダウンロードされます。

![スクリーンショット 2024-03-21 14.38.39.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3364428/031199e2-94f3-ef48-bcec-6ba892941aff.png)

## **重要な注意点**

- 秘密鍵は安全な場所に保管し、決して公開しないでください。
- サービスアカウントに割り当てるロールは、必要最小限に留めることがセキュリティ上重要です。
- また現在はサービスアカウントの情報が外部に漏れた場合の自動削除や警告通知もあるため、必ず有効にしておきましょう。

## まとめ

これで、GCPで秘密鍵を作成するプロセスは完了です。この秘密鍵は、例えばdbtなどのツールでGCPリソースへのアクセスに使用されます。適切な管理とセキュリティ対策を行いながら、これらの強力なクラウドリソースを最大限に活用しましょう。
